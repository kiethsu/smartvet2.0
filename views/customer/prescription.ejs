<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Prescription - Casa Animalia</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; }
    .prescription { width: 800px; margin: 20px auto; padding: 20px; box-sizing: border-box; position: relative; }
    .header { display: flex; align-items: center; }
    .rx {
      font-family: 'Times New Roman', serif;
      font-size: 72px;
      font-weight: bold;
      margin-right: 20px;
      color: #333;
    }
    .clinic-info {
      flex: 1;
      text-align: center;
      line-height: 1.2;
    }
    .clinic-info img.logo {
      height: 60px;
      margin-bottom: 5px;
    }
    .clinic-info .name {
      font-size: 20px;
      font-weight: bold;
      text-transform: uppercase;
    }
    .clinic-info .address,
    .clinic-info .contacts {
      font-size: 12px;
      color: #555;
    }
    .separator {
      border-top: 2px solid #000;
      margin: 10px 0 20px;
    }
    .patient-details { margin-bottom: 20px; }
    .patient-details .row { margin: 6px 0; font-size: 14px; }
    .patient-details .label {
      display: inline-block;
      width: 100px;
      font-weight: bold;
    }
    .med-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 30px;
    }
    .med-table th,
    .med-table td {
      border: 1px solid #333;
      padding: 8px;
      text-align: left;
      font-size: 14px;
    }
    .med-table th { background: #f2f2f2; }
    /* Signature Section */
    .signature {
      margin-top: 60px;
      display: flex;
      justify-content: flex-end;
    }
    .signature-content {
      text-align: right;
      min-width: 340px;
    }
    .signature-name {
      font-weight: bold;
      font-size: 16px;
      margin-bottom: 8px;
      letter-spacing: 1px;
    }
    .signature-info {
      font-size: 14px;
      white-space: nowrap;
    }
    .line {
      display: inline-block;
      min-width: 120px;
      border-bottom: 1px solid #000;
      vertical-align: middle;
      margin-left: 4px;
      margin-right: 4px;
    }
    .footer {
      margin-top: 30px;
      font-size: 12px;
      text-align: center;
      color: #555;
    }
  </style>
</head>
<body>
  <div class="prescription">
    <!-- header with big Rx and clinic info -->
    <div class="header">
      <div class="rx">Rx</div>
      <div class="clinic-info">
        <img src="/images/logo.png" alt="Casa Animalia Logo" class="logo">
        <div class="name">Casa Animalia Veterinary Clinic &amp; Grooming Center</div>
        <div class="address">Km. 111 Maharlika Highway, Cabanatuan City</div>
        <div class="contacts">Tel: 803-6935 • 0915-081-1294</div>
      </div>
    </div>
    <div class="separator"></div>

    <!-- patient and date info (without owner/doctor) -->
    <div class="patient-details">
      <div class="row"><span class="label">Date:</span> <%= new Date().toLocaleDateString() %></div>
      <div class="row"><span class="label">Name of Pet:</span> <%= reservation.pets.map(p=>p.petName).join(', ') %></div>
    </div>

  <!-- medication table -->
<table class="med-table">
  <thead>
    <tr>
      <th>Medicine</th>
      <th>Qty</th>
    </tr>
  </thead>
  <tbody>
    <% reservation.medications.forEach(m => { %>
      <tr>
        <td><%= m.name || m.medicationName %></td>
        <td><%= m.quantity || '—' %></td>
      </tr>
    <% }) %>
  </tbody>
</table>

    <!-- doctor signature, fully aligned -->
    <div class="signature">
      <div class="signature-content">
        <div class="signature-name">Dr. <%= reservation.doctor.username %>, DVM</div>
        <div class="signature-info">
          License #: <span class="line"></span>
          <span style="display:inline-block; width: 18px;"></span>
          PTR #: <span class="line"></span>
        </div>
      </div>
    </div>

    <!-- footer note -->
    <div class="footer">
      This prescription is valid for 30 days from the date above. Please follow the instructions carefully.
    </div>
  </div>
</body>
</html>
